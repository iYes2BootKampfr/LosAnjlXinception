var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},SydneyFullScreenConv;(function(n){function ir(i){var r,a,v,w,b,d,g,nt,tt,ft,et,st,at,yt,kt,ni,ti,oi,ir,ur,er,or,sr,cr,vr,yr,br,dr,gr,nu,tu,iu,ru,uu,fu,eu,ou,yu,wu,ku,du,gu,nf,tf,rf,uf,ff,ef,sf,hf,cf,lf,af,vf,yf,pf;return i===void 0&&(i=null),__awaiter(this,void 0,void 0,function(){var kf,oe,se,he,we,be,ne,te,ie,ce,le,ae,ve,re,ye,ue,wf,df,bf,fe,ee,gf,pe;return __generator(this,function(ke){switch(ke.label){case 0:if(kf=_ge(hr),kf.querySelector("cib-serp"))return[2];if(pt=(r=_w._sydConvConfig)===null||r===void 0?void 0:r.usePill,it=(a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableScrollOut,wt=(v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableSydContext,e=(w=_w._sydConvConfig)===null||w===void 0?void 0:w.convBackBtn,rt=(b=_w._sydConvConfig)===null||b===void 0?void 0:b.enableSetConvQueryFlag,pr=(d=_w._sydConvConfig)===null||d===void 0?void 0:d.enableSydTigerAns,ii=(g=_w._sydConvConfig)===null||g===void 0?void 0:g.enableSydAjax,ot=(nt=_w._sydConvConfig)===null||nt===void 0?void 0:nt.enableSydCarousel,n.moveOnlySydXAnswers=(tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.moveOnlySydXAnswers,o=(ft=_w._sydConvConfig)===null||ft===void 0?void 0:ft.hideSydFSC,s=(et=_w._sydConvConfig)===null||et===void 0?void 0:et.enableSydOverlay,bt=(st=_w._sydConvConfig)===null||st===void 0?void 0:st.enable1TCibSlot,k=(at=_w._sydConvConfig)===null||at===void 0?void 0:at.enableSydX1T,ri=(yt=_w._sydConvConfig)===null||yt===void 0?void 0:yt.hideSydMic,ui=(kt=_w._sydConvConfig)===null||kt===void 0?void 0:kt.fromNoResults,li=(ni=_w._sydConvConfig)===null||ni===void 0?void 0:ni.codexWinEnableCustomGreeting,ai=(ti=_w._sydConvConfig)===null||ti===void 0?void 0:ti.codexWinGreetingCustomString,si=(oi=_w._sydConvConfig)===null||oi===void 0?void 0:oi.checkCreatorAnsFor1T,fi=SydFSCHelper.getConfigOrDefault((ir=_w._sydConvConfig)===null||ir===void 0?void 0:ir.enableSydCarouselHistory,!1),wr=SydFSCHelper.getConfigOrDefault((ur=_w._sydConvConfig)===null||ur===void 0?void 0:ur.enableSQMsg,!1),ei=SydFSCHelper.getConfigOrDefault((er=_w._sydConvConfig)===null||er===void 0?void 0:er.enableSemSerpNoCache,!1),hi=SydFSCHelper.getConfigOrDefault((or=_w._sydConvConfig)===null||or===void 0?void 0:or.enableSydStaticAdsLink,!1),oe=SydFSCHelper.getConfigOrDefault((sr=_w._sydConvConfig)===null||sr===void 0?void 0:sr.hideSydReconnect,!1),se=(cr=_w._sydConvConfig)===null||cr===void 0?void 0:cr.enableDlBing,he=(vr=_w._sydConvConfig)===null||vr===void 0?void 0:vr.disableSydGhosting,we=SydFSCHelper.getConfigOrDefault((yr=_w._sydConvConfig)===null||yr===void 0?void 0:yr.disableCibNotificationStyleUpdate,!1),be=_w._sydCachedString,ne=_w._sydAddOptionsSet,_G[SydFSCHelper.SYD_MODE]="serp",_G[SydFSCHelper.SYD_PREV_MODE]="",ht=SydFSCHelper.getConfigOrDefault((br=_w._sydConvConfig)===null||br===void 0?void 0:br.disableTabletScroll,!1),ct=SydFSCHelper.getConfigOrDefault((dr=_w._sydConvConfig)===null||dr===void 0?void 0:dr.disableTouchDesktopScroll,!1),lt=SydFSCHelper.getConfigOrDefault((gr=_w._sydConvConfig)===null||gr===void 0?void 0:gr.disableDesktopScroll,!1),ci=SydFSCHelper.getConfigOrDefault((nu=_w._sydConvConfig)===null||nu===void 0?void 0:nu.enableChatScrollFix,!1),vt=SydFSCHelper.getConfigOrDefault((tu=_w._sydConvConfig)===null||tu===void 0?void 0:tu.enableConvModeSwitchAjax,!1),vi=SydFSCHelper.getConfigOrDefault((iu=_w._sydConvConfig)===null||iu===void 0?void 0:iu.enableCssSplitConvModeOnClick,0),dt=SydFSCHelper.getConfigOrDefault((ru=_w._sydConvConfig)===null||ru===void 0?void 0:ru.enableWelcomeScreenV2,!1),gt=SydFSCHelper.getConfigOrDefault((uu=_w._sydConvConfig)===null||uu===void 0?void 0:uu.enableChatFRE,!1),yi=SydFSCHelper.getConfigOrDefault((fu=_w._sydConvConfig)===null||fu===void 0?void 0:fu.enable2TQueryConfigsOnSerpLoad,!1),pi=SydFSCHelper.getConfigOrDefault((eu=_w._sydConvConfig)===null||eu===void 0?void 0:eu.enableBackgroundFix,!1),wi=SydFSCHelper.getConfigOrDefault((ou=_w._sydConvConfig)===null||ou===void 0?void 0:ou.hideMuidUpsell,!1),bi=SydFSCHelper.getConfigOrDefault((yu=_w._sydConvConfig)===null||yu===void 0?void 0:yu.enableSERPHideShowConv,!1),ki=SydFSCHelper.getConfigOrDefault((wu=_w._sydConvConfig)===null||wu===void 0?void 0:wu.enableBceBcbToggle,!1),h=SydFSCHelper.getConfigOrDefault((ku=_w._sydConvConfig)===null||ku===void 0?void 0:ku.enableNotebookMode,!1),gi=SydFSCHelper.getConfigOrDefault((du=_w._sydConvConfig)===null||du===void 0?void 0:du.maxMessageLength,lr),nr=SydFSCHelper.getConfigOrDefault((gu=_w._sydConvConfig)===null||gu===void 0?void 0:gu.notebookMaxMessageLength,ar),tr=SydFSCHelper.getConfigOrDefault((nf=_w._sydConvConfig)===null||nf===void 0?void 0:nf.enableSydTestCache,!1),y=_d.createElement("slot"),y.setAttribute("name","firstAnswer"),y.setAttribute("slot","firstAns"),p=_d.createElement("slot"),p.setAttribute("name","firstAns"),u=((tf=_d.getElementsByClassName("b_top"))===null||tf===void 0?void 0:tf.length)>0?_d.getElementsByClassName("b_top")[0]:null,ut=!u?!1:u.getElementsByClassName("b_wpt_ch").length>0||u.getElementsByClassName("qna-sydney").length>0,te=_ge("b_header"),kf&&te&&sj_b.insertBefore(kf,te),t=_d.createElement("div"),t===null||t===void 0?void 0:t.setAttribute("slot","firstAnswer"),t===null||t===void 0?void 0:t.setAttribute("id","sydFirstAnswer"),t.style.maxWidth="648px",SydFSCHelper.setConfigs(i),SydFSCHelper.setEventListeners(),SydFSCHelper.setSydFSCEligibleState(!0),ie=SydFSCHelper.getConfigOrDefault((rf=_w._sydConvConfig)===null||rf===void 0?void 0:rf.isCompliantSydneyEndpointEnabled,!1),ie&&MsbSydneyHelper.setCompliantSydneyUrls(),f=CIB.insertAt(kf),SydFSCHelper.setColorScheme(),ce=SydFSCHelper.getConfigOrDefault((uf=_w._sydConvConfig)===null||uf===void 0?void 0:uf.isBingChatForEnterprise,!1),le=ce&&typeof BceSydneyHelper!="undefined"?BceSydneyHelper.getSydneyWelcomeCards:undefined,dt?sj_evt.bind("sydWelcomeScreen",function(){SydWelcomeScreen===null||SydWelcomeScreen===void 0?void 0:SydWelcomeScreen.setContent(f,le)},!0):gt&&(SydneyChatFRE===null||SydneyChatFRE===void 0?void 0:SydneyChatFRE.setContent(f)),ie&&MsbSydneyHelper.addTenantLogoToHeader(),ae=SydFSCHelper.getConfigOrDefault((ff=_w._sydConvConfig)===null||ff===void 0?void 0:ff.useAccountLinkingForConversationLimitUpsell,!1),ae&&(CIB.config.bing.signIn.query.action="acclink",CIB.config.bing.signIn.query.crea="MY04B",CIB.config.bing.signIn.query.pn="AccountLinking_Chat",CIB.config.bing.signIn.query.publ="BingIP"),f.setAttribute("alignment","left"),se&&CIB.config.sydney.request.optionsSets.push("dlbing"),ne&&CIB.config.sydney.request.optionsSets.push(ne),di=(ef=CIB.config.sydney.request.optionsSets)===null||ef===void 0?void 0:ef.slice(0),ui)SydFSCHelper.lastQuery=SydFSCHelper.getQuery().toLowerCase().trim();else{CIB.config.greeting.shouldSendBotGreeting=SydFSCHelper.shouldForceSendBotGreeting;vt||(sj_evt.bind("ajax.unload",function(){SydFSCHelper.shouldResetBotGreeting=!1}),sj_evt.bind("ajax.load",function(){SydFSCHelper.shouldResetBotGreeting=!0}));CIB.onConversationRequestStateChange(function(n){n||CIB.config.greeting.shouldSendBotGreeting||!SydFSCHelper.shouldResetBotGreeting||(CIB.config.greeting.shouldSendBotGreeting=!0)})}return(vt&&sj_evt.bind("ajax.load",function(){_G[SydFSCHelper.SYD_MODE]="serp"}),ve=SydFSCHelper.getConfigOrDefault((sf=_w._sydConvConfig)===null||sf===void 0?void 0:sf.disResetTT,!1),ve&&(re=(cf=(hf=f===null||f===void 0?void 0:f.shadowRoot)===null||hf===void 0?void 0:hf.querySelector("cib-action-bar"))===null||cf===void 0?void 0:cf.shadowRoot,re&&(bf=sj_ce("style"),bf.textContent="\n                    cib-tooltip {\n                        display: none !important;\n                    }\n                ",re.appendChild(bf))),!(tr&&"SydneyTestHelper"in _w))?[3,2]:[4,SydneyTestHelper===null||SydneyTestHelper===void 0?void 0:SydneyTestHelper.setTestMocks()];case 1:ke.sent();ke.label=2;case 2:fi&&(ye=new URLSearchParams(_w.location.search),ue=ye.get("convid"),ue&&bu(ue));wf=(lf=_d.querySelector("cib-serp"))===null||lf===void 0?void 0:lf.shadowRoot;df=wf===null||wf===void 0?void 0:wf.querySelector("cib-conversation");df&&df.shadowRoot&&(c=df.shadowRoot.querySelector(".scroller"),bf=sj_ce("style"),oe&&(bf.textContent="\n                cib-notification-container {\n                    display: none;\n                }\n            "),df.shadowRoot.appendChild(bf));he&&(fe=(vf=(af=wf===null||wf===void 0?void 0:wf.querySelector("cib-action-bar"))===null||af===void 0?void 0:af.shadowRoot)===null||vf===void 0?void 0:vf.querySelector(".autosuggest-text"),fe&&(fe.style.display="none"));ee="ontouchstart"in window||!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0;ht&&Log.Log("ClientInst","Codex","TabletScrollDisabled");ee&&Log.Log("ClientInst","Codex","TouchD");ct&&Log.Log("ClientInst","Codex","TouchDesktopScrollDisabled");s||ht||ee&&ct||(sj_be(_w,"mousewheel",cu),sj_be(_w,"touchstart",lu),sj_be(_w,"touchmove",au),sj_be(_w,"touchend",vu),Log.Log("ClientInst","Codex","BindedScrollEvents"),ci&&(gf=(yf=_d.querySelector("cib-serp"))===null||yf===void 0?void 0:yf.shadowRoot.querySelector("cib-side-panel"),gf&&sj_be(gf,"mouseenter",su),gf&&sj_be(gf,"mouseleave",hu)));SydFSCHelper.triggerShareFlow();rr();sj_evt.bind("ajax.load",rr);e&&(SydFSCHelper.setupHistory(),SydFSCHelper.checkInitialState());kr();s&&pu();SydFSCHelper.triggerClarity();CIB.onResetConversation(function(){SydFSCHelper.shouldMove1TAnswers(k,l)&&fr()});CIB.onModeChanged(function(n){sj_evt.fire("onModeChanged",n)});if(CIB.onMobileUpsellPopupShown)CIB.onMobileUpsellPopupShown(function(){var n={convId:CIB.manager.conversation.id,responseTone:CIB.responseTone};SydFSCHelper.SydLog("SystemEvent","MobileUpsell","MobileUpsellPopupShown",n);SydFSCHelper.createRequest("sydchat/writeConvInfo",JSON.stringify(n))});return pe=((pf=_w.BingChatCustomGreetingString)===null||pf===void 0?void 0:pf.length)>0,li&&!pe&&SydFSCHelper.processCachedResponseUsingCIB(JSON.parse(ai)),pi&&SydFSCHelper.updateChatBackgroundWidth(),wi&&SydFSCHelper.hideSignInUpsellFor3P(),[2]}})})}function br(){var n=_ge("b_content");sb_st(function(){n&&Lib.CssClass.contains(n,"b_showconv")&&Lib.CssClass.remove(n,"b_showconv")},0)}function rr(){sj_evt.bind("hideSydFSC",function(n){var a,i,r,v,b,u,f,t,c,w;if(!et){if(et=!0,Log.Log("ClientInst","Codex","LeaveConversationMode"),o||Lib.CssClass.remove(sj_b,d),a=_ge("sb_form"),a&&Lib.CssClass.contains(a,"hassbi")&&Lib.CssClass.remove(a,"hassbi"),CIB.hideConversation(),o||s||(Lib.CssClass.add(_d.documentElement,"b_delayOvflw"),SydFSCHelper.shouldMove1TAnswers(k,l)&&fr(),i=_ge("b-scopeListItem-web"),i&&i.children.length>0&&(i.children[0].setAttribute("aria-current","page"),Lib.CssClass.add(i,"b_active"),_ge("b_skip_to_content").setAttribute("tabindex","0")),r=_ge("b-scopeListItem-conv"),r&&r.children.length>0&&(r.children[0].setAttribute("aria-current","false"),Lib.CssClass.remove(r,"b_active")),v=_ge("b_phead_chat"),v&&Lib.CssClass.contains(v,"b_active")&&Lib.CssClass.remove(v,"b_active")),_G[SydFSCHelper.SYD_PREV_MODE]!=_G[SydFSCHelper.SYD_MODE]&&(_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE],e&&(b=n&&n.length>1?n[1]:!1,b||SydFSCHelper.pushSydHistory(!1))),!e&&rt&&SydFSCHelper.updateConvFlagInURL(!1),SydFSCHelper.updateConvPageTitle(!1),_G[SydFSCHelper.SYD_MODE]="serp",ot){if(u=_ge("b_pole"),!u){for(u=sj_ce("div","b_pole"),f=_d.querySelector("main"),t=_ge("b_results");t&&f&&t.parentElement!=f;)t=t.parentElement;f&&t&&f.insertBefore(u,t)}SydFSCHelper.addCarousel(u)}else if(ii&&(c=CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text!="Generating answers for you..."||n.type==="text"&&n.author==="user"}),c&&c.length>0)){var y=c[c.length-1].text.split("`"),p=y.length==1?y[0]:y.length==3?y[1]:"",g=_ge("sb_form_go"),nt=_ge("sb_form_q");_w.sj_isAjax&&p&&nt.value.toLowerCase()!=p.toLowerCase()&&g&&(nt.value=p,SydFSCHelper.lastQuery=p,g.click())}h&&sj_evt.fire("switchToWeb");sj_ue(_w,"beforeprint",er);sj_ue(_w,"afterprint",or);w=_ge("b_content");w&&Lib.CssClass.contains(w,"b_hide")&&Lib.CssClass.remove(w,"b_hide");et=!1}});sb_st(function(){sj_evt.bind("showSydFSC",eu,!0);h&&sj_evt.bind("showNotebook",function(){sj_evt.fire("switchToNotebook");CIB.config.messaging.maxMessageLength=nr;var n=CIB.config.sydney.request.optionsSets.slice(0);n.push("prjupy");n=n.filter(function(n){return n!=="autosave"});CIB.config.sydney.request.optionsSets=n;CIB.showNotebook&&CIB.showNotebook();console.debug("CIB change to notebook mode");_G[SydFSCHelper.SYD_MODE]="notebook"},!0)},0);bi&&sj_evt.bind("sydFSCLoaded",br,!0);sj_evt.bind("onModeChanged",function(n){h&&n[1]!=="notebook"&&(CIB.config.sydney.request.optionsSets=di,CIB.config.messaging.maxMessageLength=gi)});sj_evt.fire("convInit:done")}function ur(){var t;u=((t=_d.getElementsByClassName("b_top"))===null||t===void 0?void 0:t.length)>0?_d.getElementsByClassName("b_top")[0]:null;kt=sj_b.querySelector("#b_sydTigerCont")!=null;ut=!!u&&u.querySelector("#sydwrap_wrapper")!=null;n.moveOnlySydXAnswers&&(i=sj_b.querySelector("#sydwrap_wrapper #b_syd_sm_chat .b_wpt_chat"),i&&(Lib.CssClass.add(i,ni),oi=i.querySelector(".b_wpt_creator_content")!=null))}function kr(){var n=_ge("id_hbfo");sj_be(n,"click",function(n){var r=n.target,t,i;_G[SydFSCHelper.SYD_MODE]=="conversation"&&r&&(t=dr(r),t&&t.target!="_blank"&&(i="",t.href.indexOf("/profile/")>=0?i="profile":t.href.indexOf("/account/")>=0&&(i="account"),SydFSCHelper.LogIntEvent("ConversationViewExit","Conversation",{source:"ClickMenu",target:i})))})}function dr(n){while(n!=null){if(n.tagName=="A"&&Lib.CssClass.contains(n,"hb_section"))return n;n=n.parentElement}return null}function yt(n,t,i){i===void 0&&(i=!1);t&&n&&(i?n.prepend(t):n.appendChild(t))}function gr(n){var u,f,e,o,s,h;if(!pt){yt(_ge("b_sydtoporpole"),n);return}var l=_d.querySelector("cib-serp"),i=(f=(u=_d.querySelector("cib-serp"))===null||u===void 0?void 0:u.shadowRoot)===null||f===void 0?void 0:f.querySelector("cib-conversation"),r=(o=(e=i===null||i===void 0?void 0:i.shadowRoot)===null||e===void 0?void 0:e.querySelector(".scroller"))===null||o===void 0?void 0:o.querySelector(".main cib-welcome-container"),c=(h=(s=i===null||i===void 0?void 0:i.shadowRoot)===null||s===void 0?void 0:s.querySelector(".scroller"))===null||h===void 0?void 0:h.querySelector(".main");i===null||i===void 0?void 0:i.appendChild(y);r?r===null||r===void 0?void 0:r.after(p):c===null||c===void 0?void 0:c.prepend(p);t===null||t===void 0?void 0:t.appendChild(n);bt;yt(l,t);nu()}function nu(){tu();iu()}function tu(){var t=_d.querySelector("#sydFirstAnswer .b_wpt_chat"),n=_d.querySelector("#sydFirstAnswer .b_wpt_chat .b_wpt_chat_inner");t&&n&&(t.querySelector("b_wpt_chat_inner > .b_sideBleed")&&(n.style.padding="0 20px 5px 20px"),t.querySelector(".b_wpt_chat_inner > .wtr_core.b_sideBleed, .b_wpt_chat_inner > .b_sideBleed #lMapContainer, .b_wpt_chat_inner > .ji_container, .b_wpt_chat_inner > .b_sideBleed #placeAnswer, .b_wpt_chat_inner > .b_sideBleed .ckt_main, .b_wpt_chat_inner > .b_sideBleed .mit_ans, .b_wpt_chat_inner > .jobsAnswerContainer, .b_wpt_chat_inner > div .sa_main")&&(n.style.padding="unset"),n.querySelector(".b_wpt_creator")&&(n.style.padding="0px"),n.querySelector(".b_wpt_insights")&&(n.style.paddingTop="0px",n.style.paddingBottom="0px"))}function iu(){var n=_d.querySelector("#sydFirstAnswer .b_wpt_chat");n&&n.querySelector(".b_wpt_creator")&&(n.style.boxShadow="unset")}function ru(){if(ur(),n.moveOnlySydXAnswers){if(!i||si&&oi)return;(l||ut&&!kt)&&sb_st(function(){gr(i)},yr)}}function fr(){if(n.moveOnlySydXAnswers){if(!i)return;var t=sj_b.querySelector("#sydwrap_wrapper #b_syd_sm_chat");t&&!t.contains(i)&&i&&(Lib.CssClass.remove(i,ni),yt(t,i,!0))}}function uu(){var n=new URLSearchParams(_w.location.search),t=n.get("sendquery");return t==="1"}function fu(){var n=_ge("conv-css-link");n&&!n.classList.contains("css-conv-added")&&(n.setAttribute("rel","stylesheet"),n.setAttribute("class","css-conv-added"))}function eu(n){var y,p,w,b,nt,t,tt,et,u,v,f,r,c,i,a,ht;if(!ft){ft=!0;SydFSCHelper.updateResponseToneAfterSerp();CIB.config.features.enableAds=!0;ei&&(nt=CIB.config.sydney.request.optionsSets.indexOf("nocacheread"),nt>=0&&CIB.config.sydney.request.optionsSets.splice(nt,1));vi&&fu();t=_ge("b_header");tt=!1;t&&g&&Lib.CssClass.contains(t,g)&&(Lib.CssClass.remove(t,g),SydFSCHelper.LogIntEvent("ConversationViewEnter","Scope",{source:"ShowConv"}),h&&(et=new URLSearchParams(window.location.search),tt=et.get("showntbk")==="1"));t&&!Lib.CssClass.contains(t,"b_bcbSwitch")&&ki&&Lib.CssClass.add(t,"b_bcbSwitch");ot&&SydFSCHelper.removeQueries();u=n&&n.length>1?n[1]:null;v=n&&n.length>2?n[2]:null;l=n&&n.length>3?n[3]==vr:!1;var it=n&&n.length>5?n[5]:null,ct=n&&n.length>6?n[6]:!1,ut=n&&n.length>7?n[7]:!1,lt=n&&n.length>8?n[8]:!1;if(o||s||(_w.scrollY>0&&_w.scrollTo(0,0),_d.documentElement&&(Lib.CssClass.add(_d.documentElement,"b_disOvflw"),Lib.CssClass.remove(_d.documentElement,"b_delayOvflw"))),o||Lib.CssClass.add(sj_b,d),SydFSCHelper.shouldMove1TAnswers(k,l,u)&&ru(),u&&SydFSCHelper.sendFirstQuery(lt?u.trim():u.toLowerCase().trim(),v,it,ut||uu()),CIB.showConversation(),ct&&(f=[],it&&f.push({author:"user",text:it}),v&&f.push({author:"bot",text:v}),wt&&f.length!=0&&CIB.registerContext(f),CIB.toggleSpeechEnabled(),CIB.triggerMic()),!o&&!s&&(r=_ge("b-scopeListItem-web"),r&&r.children.length>0&&r.parentElement&&(r.children[0].setAttribute("aria-current","false"),Lib.CssClass.remove(r,"b_active")),c=_ge("b-scopeListItem-conv"),c&&c.children.length>0&&(c.children[0].setAttribute("aria-current","page"),Lib.CssClass.add(c,"b_active"),_ge("b_skip_to_content").setAttribute("tabindex","-1")),i=_d.querySelector(".b_sydConvMode"),a=(b=(w=(p=(y=i===null||i===void 0?void 0:i.querySelector("cib-serp"))===null||y===void 0?void 0:y.shadowRoot)===null||p===void 0?void 0:p.querySelector("cib-action-bar"))===null||w===void 0?void 0:w.shadowRoot)===null||b===void 0?void 0:b.querySelector(".input-container .text-input textarea"),a&&!ut&&a.focus(),i&&a&&ut)){sj_be(i,"keyup",st);function st(n){(n.code=="Tab"||n.keyCode==9||n.key=="Tab")&&a.focus();i.removeEventListener("keyup",st)}}_G[SydFSCHelper.SYD_PREV_MODE]!=_G[SydFSCHelper.SYD_MODE]&&(_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE],e&&(ht=n&&n.length>4?n[4]:!1,ht||SydFSCHelper.pushSydHistory(!0)));!e&&rt&&SydFSCHelper.updateConvFlagInURL(!0);SydFSCHelper.updateConvPageTitle(!0);yi||ou();_G[SydFSCHelper.SYD_MODE]="conversation";tt&&sj_evt.fire("switchToNotebook");sj_be(_w,"beforeprint",er);sj_be(_w,"afterprint",or);ft=!1}}function ou(){var n=ClientObserver.getBrowserWidth(),t=ClientObserver.getBrowserHeight();SydFSCHelper.set2TQueryConfigs(n,t,hi)}function su(){at=!0}function hu(){at=!1}function cu(n){var t=0;n||(n=window.event);n.wheelDelta?t=n.wheelDelta/60:n.detail&&(t=-n.detail/2);sr(t,nt)}function lu(n){st=n.changedTouches[0].clientY;v=n.touches&&n.touches.length>1?!0:!1}function au(n){var t=n.changedTouches[0].clientY-st;sr(t,cr,!0)}function vu(n){r=0;w=!1;b=!1;st=0;v=n.touches&&n.touches.length!==0}function er(){var n=_ge("b_content");n&&Lib.CssClass.add(_ge("b_content"),"b_hide")}function or(){var n=_ge("b_content");n&&Lib.CssClass.remove(n,"b_hide")}function sr(n,t,i){if(i===void 0&&(i=!1),Log.Log("ClientInst","Codex","CheckScrollCalled"),!at){sb_ct(ti);w||(a=Lib.CssClass.contains(sj_b,d),b=a?yu():_w.scrollY==0);w=!0;b&&(r+=n);i||(ti=sb_st(function(){r=0;w=!1;b=!1},150));var f=!a&&r>tt&&_G[SydFSCHelper.SYD_MODE]!="conversation"&&!v,u=it&&a&&r<-1*tt&&_G[SydFSCHelper.SYD_MODE]=="conversation"&&!v;h&&!u&&(u=it&&a&&r<-1*tt&&_G[SydFSCHelper.SYD_MODE]=="notebook"&&!v);f?(Log.Log("ClientInst","Codex","ScrollToChat"),!lt&&r>t&&(SydFSCHelper.LogIntEvent("ConversationViewEnter","Scope",{source:"ScrollUp"}),SydFSCHelper.triggerSydFSCQueryWithContext())):u&&(Log.Log("ClientInst","Codex","ScrollOutChat"),!lt&&r<-1*t&&(SydFSCHelper.LogIntEvent("ConversationViewExit","Scope",{source:"ScrollDown",target:_G[SydFSCHelper.SYD_PREV_MODE]}),sj_evt.fire("hideSydFSC"),sb_st(function(){_w.scrollTo(0,0)},1)))}}function yu(){return!c?!1:Math.abs(c.scrollTop-(c.scrollHeight-c.offsetHeight))<1}function pu(){var t,i,r,e=_ge("b_sydOvrClose"),n,u,f;e&&sj_be(e,"click",function(){sj_evt.fire("hideSydFSC")});n=(r=(i=(t=_d.querySelector("#b_sydConvCont cib-serp"))===null||t===void 0?void 0:t.shadowRoot)===null||i===void 0?void 0:i.querySelector("cib-action-bar"))===null||r===void 0?void 0:r.shadowRoot;u=n===null||n===void 0?void 0:n.querySelector(".outside-left-container");u&&(u.style.display="none");ri&&n&&(f=sj_ce("style"),f.textContent="\n                .control.microphone {\n                    display: none;\n                }\n            ",n.appendChild(f))}function wu(n,t){var i,r;n===void 0&&(n=null);t===void 0&&(t=nt);r=(i=_w._sydPayWallConfig)===null||i===void 0?void 0:i.loadSydneyConvResWithPayWall;r?sj_evt.bind("waitlistUpdate:eligible",ir,!0):void ir(n);nt=t}function bu(n){CIB.loadConversation(n);SydFSCHelper.lastQuery=SydFSCHelper.getQuery().toLowerCase().trim()}var d="b_sydConvMode",g="b_sydShowConv",hr="b_sydConvCont",nt=10,tt=10,cr=100,lr=2e3,ar=2e3,pt,it,wt,e,rt,bt=!1,u,ut,i=null,kt=!1,f,dt,gt,c,t,y,p,vr="SYDX_WRAPPER",l=!1,ni="b_sydxwrappedanswer",yr=1e3,ft=!1,et=!1,r=0,ti,w=!1,b=!1,a=!1,pr=!1,k=!1,ii=!1,ot=!1,o=!1,s=!1,st;n.moveOnlySydXAnswers=!1;var ri=!1,ui=!1,fi=!1,wr=!1,ei=!1,oi=!1,si=!1,hi=!1,ht=!1,ct=!1,lt=!1,ci=!1,at=!1,vt=!1,li=!1,ai="",v=!1,vi,yi=!1,pi=!1,wi=!1,bi=!1,ki=!1,h=!1,di,gi,nr,tr=!1;(typeof sj_b=="undefined"||sj_b==null)&&(window.sj_b=document.body);n.init1TAnswerContents=ur;n.initWithWaitlistUpdate=wu;sj_evt.fire("sydFSC.init")})(SydneyFullScreenConv||(SydneyFullScreenConv={}))